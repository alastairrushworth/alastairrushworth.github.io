<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="Exploring the `tdf` package for Tour de France data" name=description><title>alastair rushworth - Visualising Tour De France Data In R</title><link href=https://alastairrushworth.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><script src=https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js></script><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y rel=stylesheet><script crossorigin defer integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js></script><script crossorigin defer integrity=sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js></script><script crossorigin defer integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe onload=renderMathInElement(document.body); src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js></script><link href=https://alastairrushworth.github.io/site.css rel=stylesheet><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y rel=stylesheet><body><div class=container><div class=mobile-navbar id=mobile-navbar><div class=mobile-header-logo><a class=logo href=https://alastairrushworth.github.io/>alastair rushworth</a></div><div class="mobile-navbar-icon icon-out"><span></span><span></span><span></span></div></div><nav class="mobile-menu slideout-menu slideout-menu-left" id=mobile-menu><ul class=mobile-menu-list><li class=mobile-menu-item><a href=https://alastairrushworth.github.io/> Home </a><li class=mobile-menu-item><a href=https://alastairrushworth.github.io//about> About </a><li class=mobile-menu-item><a href=https://alastairrushworth.github.io//tags> Tags </a></ul></nav><header id=header><div class=logo><a href=https://alastairrushworth.github.io/>alastair rushworth</a></div><nav class=menu><ul><li><a href=https://alastairrushworth.github.io/> Home </a><li><a href=https://alastairrushworth.github.io//about> About </a><li><a href=https://alastairrushworth.github.io//tags> Tags </a></ul></nav></header><main><div class=content id=mobile-panel><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a class=toc-link href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/#tdf-an-r-package-for-tour-de-france-data>tdf - an R package for Tour de France data</a> <ul><li><a class=toc-link href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/#how-has-the-race-changed-over-time>How has the race changed over time?</a></ul><li><a class=toc-link href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/#top-5-average-speeds-of-tour-de-france-winners>Top 5 average speeds of Tour de France winners</a><li><a class=toc-link href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/#how-have-the-riders-changed-over-time>How have the riders changed over time?</a><li><a class=toc-link href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/#stage-results>Stage results</a></ul></nav></div></div><article class=post><header class=post__header><h1 class=post__title><a href=https://alastairrushworth.github.io/posts/visualising-tour-de-france-data-in-r/>Visualising Tour De France Data In R</a></h1></header><div class=post-content><p>The <a href=https://en.wikipedia.org/wiki/Tour_de_France>Tour de France (‘Le Tour’)</a> is the world’s biggest and most prestigious cycling event with a long history spanning back as far as 1903. Each annual ‘edition’ of the race is composed of around 21 stages that traverse the French nation, each stage is a standalone race by itself. The racing is complex, with each team of 9 riders competing for any combination of individual stage wins, sprint points, mountain climbing, aggressive riding and team ability. The most coveted prize of all is the ‘Generale Classification’ (GC) which is awarded to the rider with the lowest aggregate time at the end of the race. Each day, the rider with the lowest aggregate time following the previous stage wears the ‘Maillot Jaune’ (yellow jersey) indicating that they are the current race leader.</p><span id=continue-reading></span><h2 id=tdf-an-r-package-for-tour-de-france-data><code>tdf</code> - an R package for Tour de France data</h2><p>The <code>tdf</code> package is <a href=https://github.com/alastairrushworth/tdf>hosted on github</a> and contains information about the overall winning rider for each edition of the race, the winner’s biographical information and the results for each stage in each edition. To install the package, use<pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span style=color:#f07171>library</span><span>(remotes)
</span><span style=color:#f29718>install_github</span><span>(</span><span style=color:#86b300>"alastairrushworth/tdf"</span><span>)
</span></code></pre><p>The package is just a container for the dataframe editions:<pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span style=color:#f07171>library</span><span>(tdf)
</span><span style=color:#f07171>library</span><span>(tidyverse)
</span><span style=color:#abb0b6;font-style:italic>## visualise contents tdf::editions
</span><span style=color:#f29718>glimpse</span><span>(editions)
</span><span style=color:#abb0b6;font-style:italic>## Observations: 106
</span><span style=color:#abb0b6;font-style:italic>## Variables: 20
</span><span style=color:#abb0b6;font-style:italic>## $ edition       &LTint> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, …
</span><span style=color:#abb0b6;font-style:italic>## $ start_date    &LTdate> 1903-07-01, 1904-07-02, 1905-07-09, 1906-07-04, 1907-0…
</span><span style=color:#abb0b6;font-style:italic>## $ winner_name   &LTchr> "Maurice Garin", "Henri Cornet", "Louis Trousselier", "…
</span><span style=color:#abb0b6;font-style:italic>## $ winner_team   &LTchr> "La Française", "Conte", "Peugeot–Wolber", "Peugeot–Wol…
</span><span style=color:#abb0b6;font-style:italic>## $ distance      &LTdbl> 2428, 2428, 2994, 4637, 4488, 4497, 4498, 4734, 5343, 5…
</span><span style=color:#abb0b6;font-style:italic>## $ time_overall  &LTdbl> 94.55389, 96.09861, NA, NA, NA, NA, NA, NA, NA, NA, 197…
</span><span style=color:#abb0b6;font-style:italic>## $ time_margin   &LTdbl> 2.98916667, 2.27055556, NA, NA, NA, NA, NA, NA, NA, NA,…
</span><span style=color:#abb0b6;font-style:italic>## $ stage_wins    &LTdbl> 3, 1, 5, 5, 2, 5, 6, 4, 2, 3, 1, 1, 1, 4, 2, 0, 3, 4, 4…
</span><span style=color:#abb0b6;font-style:italic>## $ stages_led    &LTdbl> 6, 3, 10, 12, 5, 13, 13, 3, 13, 13, 8, 15, 2, 14, 14, 3…
</span><span style=color:#abb0b6;font-style:italic>## $ height        &LTdbl> 1.62, NA, NA, NA, NA, NA, 1.78, NA, NA, NA, NA, NA, NA,…
</span><span style=color:#abb0b6;font-style:italic>## $ weight        &LTdbl> 60, NA, NA, NA, NA, NA, 88, NA, NA, NA, NA, NA, NA, NA,…
</span><span style=color:#abb0b6;font-style:italic>## $ age           &LTint> 32, 19, 24, 27, 24, 25, 22, 22, 26, 23, 23, 24, 33, 30,…
</span><span style=color:#abb0b6;font-style:italic>## $ born          &LTdate> 1871-03-03, 1884-08-04, 1881-06-29, 1879-06-05, 1882-1…
</span><span style=color:#abb0b6;font-style:italic>## $ died          &LTdate> 1957-02-19, 1941-03-18, 1939-04-24, 1907-01-25, 1917-1…
</span><span style=color:#abb0b6;font-style:italic>## $ full_name     &LTchr> NA, NA, NA, NA, "Lucien Georges Mazan", "Lucien Georges…
</span><span style=color:#abb0b6;font-style:italic>## $ nickname      &LTchr> "The Little Chimney-sweep", "Le rigolo (The joker)", "L…
</span><span style=color:#abb0b6;font-style:italic>## $ birth_town    &LTchr> "Arvier", "Desvres", "Paris", "Moret-sur-Loing", "Pless…
</span><span style=color:#abb0b6;font-style:italic>## $ birth_country &LTchr> "Italy", "France", "France", "France", "France", "Franc…
</span><span style=color:#abb0b6;font-style:italic>## $ nationality   &LTchr> " France", " France", " France", " France", " France", …
</span><span style=color:#abb0b6;font-style:italic>## $ stage_results &LTnamed list> [[&LTtbl_df[37 x 7]>, &LTtbl_df[35 x 7]>, &LTtbl_df[27…
</span></code></pre><p><code>editions</code> is a tibble whose rows each correspond to a single edition of the Tour de France. The columns contain information about the race itself and the overall winner, including:<ul><li><code>distance</code> is the aggregate distance in kilometres covered by the entire race.<li><code>time_overall</code> is the time in hours taken by the winner to complete the race<li><code>time_margin</code> is the difference in finishing times between the race winner and the first runner up.<li><code>stage_wins</code> is the number of stages won by the eventual winner during the edition (note that it is possible to win the GC without winning any stages at all).<li><code>stages_led</code> is the number of stages spent as the race leader (wearing the yellow jersey) by the eventual winner.<li><code>weight</code> is the winner’s body weight in kilograms.<li><code>height</code> is the winner’s height in meters.<li><code>stage_results</code> is a column containing a list of lists. Each element contains a list of stage results for a particular edition of the Tour de France.</ul><h3 id=how-has-the-race-changed-over-time>How has the race changed over time?</h3><p>Forget ultra-marathons and tough mudder, early editions of Le Tour were really tough. Riders were mostly self-supported, rode in woollen jerseys for hundreds of miles per day on steel-framed bicycles. The longest stage in Tour history was 482 kilometres (Stage 5, 1919) — the stage winner, Jean Alavoine, took almost 19 hours to complete the stage.<figure style=text-align:center><img alt=drawing src=/images/tdf_2.webp width=600><figcaption>Robert Jacquinot taking a break from the 482km long Stage 5 during the 1922 Tour de France. (Image source: Wikipedia.)</figcaption></figure><p>To get a sense for how the length of the race has varied since 1903, we can visualise the total <code>distance</code> in the editions data:<pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span style=color:#f07171>library</span><span>(ggplot2)
</span><span>editions </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>ggplot</span><span>(</span><span style=color:#f29718>aes</span><span>(</span><span style=color:#ff8f40>x </span><span style=color:#ed9366>=</span><span> start_date</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>y </span><span style=color:#ed9366>=</span><span> distance</span><span style=color:#61676ccc>, 
</span><span>             </span><span style=color:#ff8f40>color </span><span style=color:#ed9366>=</span><span> edition)) </span><span style=color:#ed9366>+
</span><span>  </span><span style=color:#f29718>geom_point</span><span>() </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>xlab</span><span>(</span><span style=color:#86b300>'Race start date'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ylab</span><span>(</span><span style=color:#86b300>'Distance in kilometres'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ggtitle</span><span>(</span><span style=color:#86b300>'Tour de France total distance covered over time'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>theme</span><span>(</span><span style=color:#ff8f40>legend.position </span><span style=color:#ed9366>= </span><span style=color:#86b300>"none"</span><span>)
</span></code></pre><div style=text-align:center><img style="margin:0 auto;display:block" alt=drawing src=/images/tdf_7.webp width=700></div><p>It’s pretty clear that over time, the distances covered have decreased dramatically, and have roughly stabilised at about 3500 kilometres during the last 2 decades (still a huge distance). You can see that the longest ever Tour de France edition was in 1926, with a total distance covered of 5,745 kilometres!<p>On the face of it, it seems like the riders of today have it substantially easier compared to riders of the past. But how fast are today’s riders going?<pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span style=color:#f07171>library</span><span>(ggrepel)
</span><span>editions </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>ggplot</span><span>(</span><span style=color:#f29718>aes</span><span>(</span><span style=color:#ff8f40>x </span><span style=color:#ed9366>=</span><span> start_date</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>y </span><span style=color:#ed9366>=</span><span> distance </span><span style=color:#ed9366>/</span><span> time_overall</span><span style=color:#61676ccc>, 
</span><span>             </span><span style=color:#ff8f40>color </span><span style=color:#ed9366>=</span><span> edition)) </span><span style=color:#ed9366>+
</span><span>  </span><span style=color:#f29718>geom_point</span><span>(</span><span style=color:#ff8f40>na.rm </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>TRUE</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>geom_label_repel</span><span>(</span><span style=color:#ff8f40>data </span><span style=color:#ed9366>=</span><span> editions </span><span style=color:#ed9366>%>% </span><span style=color:#f29718>sample_n</span><span>(</span><span style=color:#ff8f40>20</span><span>)</span><span style=color:#61676ccc>, 
</span><span>                  </span><span style=color:#f29718>aes</span><span>(</span><span style=color:#ff8f40>label </span><span style=color:#ed9366>=</span><span> winner_name)</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>size </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>2</span><span style=color:#61676ccc>.</span><span style=color:#ff8f40>3</span><span style=color:#61676ccc>,  
</span><span>                  </span><span style=color:#ff8f40>nudge_y </span><span style=color:#ed9366>= -</span><span style=color:#ff8f40>9</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>na.rm </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>TRUE</span><span style=color:#61676ccc>,
</span><span>                  </span><span style=color:#ff8f40>segment.alpha </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>.</span><span style=color:#ff8f40>2</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>xlab</span><span>(</span><span style=color:#86b300>'Edition start date'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ylab</span><span>(</span><span style=color:#86b300>'Average speed km/h'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ggtitle</span><span>(</span><span style=color:#86b300>'Tour de France winners average speed'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>theme</span><span>(</span><span style=color:#ff8f40>legend.position </span><span style=color:#ed9366>= </span><span style=color:#86b300>"none"</span><span>)
</span></code></pre><div style=text-align:center><img style="margin:0 auto;display:block" alt=drawing src=/images/tdf_6.webp width=700></div><p>They’re going pretty fast. It looks like while the race has been getting gradually shorter, the speeds have been getting much faster. The change also coincides with professionalisation of the sport, better equipment and smarter training so it’s hard to provide an exact account for the change in speed. It’s worth highlighting the top two fastest average speeds in Tour de France history:<h2 id=top-5-average-speeds-of-tour-de-france-winners>Top 5 average speeds of Tour de France winners</h2><pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span>editions </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>mutate</span><span>(</span><span style=color:#ff8f40>speed </span><span style=color:#ed9366>=</span><span> distance </span><span style=color:#ed9366>/</span><span> time_overall) </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>select</span><span>(start_date</span><span style=color:#61676ccc>,</span><span> winner_name</span><span style=color:#61676ccc>,</span><span> speed) </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>arrange</span><span>(</span><span style=color:#f29718>desc</span><span>(speed)) </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f07171>print</span><span>(</span><span style=color:#ff8f40>n </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>2</span><span>)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>## # A tibble: 106 x 3
</span><span style=color:#abb0b6;font-style:italic>##   start_date winner_name     speed
</span><span style=color:#abb0b6;font-style:italic>##   &LTdate>     &LTchr>           &LTdbl>
</span><span style=color:#abb0b6;font-style:italic>## 1 1998-07-11 Marco Pantani    41.7
</span><span style=color:#abb0b6;font-style:italic>## 2 2005-07-02 Lance Armstrong  41.7
</span><span style=color:#abb0b6;font-style:italic>## # … with 104 more rows
</span></code></pre><p>The two fastest ever editions of the Tour de France were won by Marco Pantani (in 1998) and Lance Armstrong (in 2005), both of whom were later stripped of these (and other) wins for their use of banned performance-enhancing substances. The speed of doped riders in such Tour editions was so obviously faster than non-doped riders, that French media declared a culture of <em>“Cyclisme a deux vitesses”</em> (<em>“two-speed cycling”</em>). It is unknown how much riders still use banned substances for performance enhancement, but the average speeds of the Pantani / Armstrong years have not been reached in any edition since.<p>Note: the the data in the <code>tdf</code> package retains the winning times of banned, disqualified and otherwise sanctioned riders for the purposes of data analysis. The overall standings are as they would have appeared on the final day of the race - therefore please note that the officially recognised winner of a particular edition may not be the rider with the fastest time.<h2 id=how-have-the-riders-changed-over-time>How have the riders changed over time?</h2><p>France is a mountainous country, and a crucial ingredient for success in the Tour de France is a rider’s ability to climb hills quickly and efficiently. Hill climbing is a fight against gravity that pits a rider’s strength against their total weight (bike + equipment + body). The rider has two options to improve: get stronger and get leaner. Using the <code>editions</code> data we can explore the latter over time by using rider <code>height</code> and <code>weight</code> data to calculate body mass index (BMI), which is a (very rough) proxy for leanness.<div style=text-align:center><img style="margin:0 auto;display:block" alt=drawing src=/images/tdf_5.png width=400></div><pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span style=color:#f07171>library</span><span>(ggrepel)
</span><span>editions </span><span style=color:#ed9366>%>%
</span><span>  </span><span style=color:#f29718>ggplot</span><span>(</span><span style=color:#f29718>aes</span><span>(</span><span style=color:#ff8f40>x </span><span style=color:#ed9366>=</span><span> start_date</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>y </span><span style=color:#ed9366>=</span><span> weight </span><span style=color:#ed9366>/</span><span> height</span><span style=color:#ed9366>^</span><span style=color:#ff8f40>2</span><span style=color:#61676ccc>, 
</span><span>             </span><span style=color:#ff8f40>color </span><span style=color:#ed9366>=</span><span> edition)) </span><span style=color:#ed9366>+
</span><span>  </span><span style=color:#f29718>geom_point</span><span>(</span><span style=color:#ff8f40>na.rm </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>TRUE</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>geom_label_repel</span><span>(</span><span style=color:#ff8f40>data </span><span style=color:#ed9366>=</span><span> editions </span><span style=color:#ed9366>%>% </span><span style=color:#f29718>sample_n</span><span>(</span><span style=color:#ff8f40>20</span><span>)</span><span style=color:#61676ccc>, 
</span><span>                  </span><span style=color:#f29718>aes</span><span>(</span><span style=color:#ff8f40>label </span><span style=color:#ed9366>=</span><span> winner_name)</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>size </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1</span><span style=color:#61676ccc>.</span><span style=color:#ff8f40>8</span><span style=color:#61676ccc>,  
</span><span>                  </span><span style=color:#ff8f40>nudge_y </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>4</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>na.rm </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>TRUE</span><span style=color:#61676ccc>,
</span><span>                  </span><span style=color:#ff8f40>segment.alpha </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>.</span><span style=color:#ff8f40>2</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>xlab</span><span>(</span><span style=color:#86b300>'Edition start date'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ylab</span><span>(</span><span style=color:#86b300>'Body mass index'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>ggtitle</span><span>(</span><span style=color:#86b300>'Tour de France winners body mass index'</span><span>) </span><span style=color:#ed9366>+ 
</span><span>  </span><span style=color:#f29718>theme</span><span>(</span><span style=color:#ff8f40>legend.position </span><span style=color:#ed9366>= </span><span style=color:#86b300>"none"</span><span>)
</span></code></pre><div style=text-align:center><img style="margin:0 auto;display:block" alt=drawing src=/images/tdf_4.webp width=700></div><p>It’s pretty clear that over time, the trend has been towards winners having lower BMI, and likely being leaner overall. Apart from the obvious issues with BMI as a metric (body shapes are more complex than just height and weight) it’s interesting to consider why this trend has occurred. It’s tempting to conclude that more careful dieting and preparation in recent years has lead to riders having lower body fat percentages, which can enhance a rider’s power to weight ratio and overall performance. However, it could also be due to changes in the race: if race winning becomes more dependent on performance in the mountains (for example, because the number of mountain stages has increased overall) this could result in the lighter and leaner athletes tending to excel overall.<h2 id=stage-results>Stage results</h2><p>The column <code>stage_results</code> contains the breakdown of results by stage for each edition of the Tour de France. For example, the results of the final stage of the 2019 Tour de France can be printed using<pre class=language-r data-lang=r style=color:#61676c;background-color:#fafafa><code class=language-r data-lang=r><span>editions</span><span style=color:#fa6e32>$</span><span>stage_results</span><span style=color:#fa6e32>$</span><span>`2019`</span><span style=color:#fa6e32>$</span><span>`stage-21`
</span><span style=color:#abb0b6;font-style:italic>## # A tibble: 155 x 8
</span><span style=color:#abb0b6;font-style:italic>##     rank time     rider         bib_number   age team            points elapsed 
</span><span style=color:#abb0b6;font-style:italic>##    &LTint> &LTPeriod> &LTchr>              &LTint> &LTint> &LTchr>            &LTint> &LTPeriod>
</span><span style=color:#abb0b6;font-style:italic>##  1     1 3H 4M 8S Ewan Caleb           161    25 Lotto Soudal       100 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  2     2 0S       Groenewegen …         84    26 Team Jumbo-Vis…     70 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  3     3 0S       Bonifazio Ni…        172    25 Team Total Dir…     50 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  4     4 0S       Richeze Maxi…         27    36 Deceuninck - Q…     40 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  5     5 0S       Boasson Hage…        201    32 Team Dimension…     32 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  6     6 0S       Greipel André        215    37 Team Arkéa Sam…     26 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  7     7 0S       Trentin Matt…        107    29 Mitchelton-Sco…     22 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  8     8 0S       Stuyven Jasp…        138    27 Trek - Segafre…     18 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>##  9     9 0S       Arndt Nikias         142    27 Team Sunweb         14 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>## 10    10 0S       Sagan Peter           11    29 BORA - hansgro…     10 3H 4M 8S
</span><span style=color:#abb0b6;font-style:italic>## # … with 145 more rows
</span></code></pre><p>The important columns for the stage data are<ul><li><code>time</code> the finishing time of the stage winner and time difference to the winner.<li><code>rider</code> the rider name formatted as ‘Surname Forename’.<li><code>age</code> age of the rider at the start of the stage.<li><code>elapsed</code> the time taken to reach the finish line - this is stored as a <code>lubridate::period</code> object for easier printing and manipulation.</ul><p>In the case above, Caleb Ewan won the finish line sprint of the final stage. Since the first 53 riders were part of a contiguous group of riders, they were granted the same finishing time as Ewan, but their finishing order corresponds to the order they passed the finish line.<figure style=text-align:center><img alt=drawing src=/images/tdf_3.webp width=600><figcaption>Caleb Ewan wins the sprint on stage 21 of the 2019 Tour de France. (Image source: AFP/Getty Images)</figcaption></figure></div><div class=post-footer><div class=post-tags><a href=https://alastairrushworth.github.io/tags/r/>#r</a><a href=https://alastairrushworth.github.io/tags/visualisation/>#visualisation</a><a href=https://alastairrushworth.github.io/tags/data-science/>#data science</a><a href=https://alastairrushworth.github.io/tags/cycling/>#cycling</a></div></div></article></div></main></div><script src=https://alastairrushworth.github.io/even.js></script>